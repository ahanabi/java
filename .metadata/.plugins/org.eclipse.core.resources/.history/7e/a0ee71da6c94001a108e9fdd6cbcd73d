package GuessNumberGame;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.Random;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.WindowConstants;

public class GuessNumber extends javax.swing.JFrame {
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	//  序列化时为了保持版本的兼容性，即在版本升级时反序列化仍保持对象的唯一性。

	{
		try{
			javax.swing.UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
		} catch(Exception e) {
			e.printStackTrace();
		}
	}
	//异常处理
  
	private JLabel jLabel1;
	private JTextField jTextField1;
	private JButton jButton1;
	private JButton jButton2;
	private int number=0;
	private int counter=0;
	long startTime = System.currentTimeMillis();
	long endTime;
	
	public static void main(String[] args){//创建窗体
        GuessNumber inst = new GuessNumber();
        inst.setVisible(true);//可视化
	}
	
	public GuessNumber(){
		super();
		initGUI();
		Random random = new Random();
		number = random.nextInt(100);
	}
	
	private void initGUI(){
		try{
			setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
			//调用任意已注册 WindowListener 的对象后自动隐藏并释放该窗体。 叉掉。
			getContentPane().setLayout(null);//文本框清空
			{
				jLabel1 = new JLabel();
				getContentPane().add(jLabel1);
			    jLabel1.setText("<html>欢迎进入猜数字游戏，游戏规则如下：<br>"+"游戏随机产生1-100的整数，玩家通过输入数字来匹配所产生的数字。<br>"+"我心里有一个1到100的整数，你猜是什么？<ml>");//标题
			    jLabel1.setBounds(7, 0, 420, 147);//设置布局和大小
			}
			{
				jTextField1 = new JTextField();//文本框
				getContentPane().add(jTextField1);
				jTextField1.setBounds(42, 168, 112, 28);//设置文本框位置和大小
				jTextField1.addKeyListener(new KeyAdapter(){
					public void keyPressed(KeyEvent evt){
						jTextField1KeyPressed(evt);//监听回车键并执行相应操作
					}
				});
			}
			{
				jButton1 = new JButton();//按钮1
				getContentPane().add(jButton1);
				jButton1.setText("确定");//按钮1显示
				jButton1.setBounds(182, 168, 77, 30);//按钮1设置布局和大小
				jButton1.addActionListener(new ActionListener(){//将按钮1插入监听
					public void actionPerformed(ActionEvent evt){
						jButton1ActionPerformed(evt);
					}
				});
			}
			
			{
		        jButton2 = new JButton();//按钮2
		        getContentPane().add(jButton2);
		        jButton2.setText("重新开始");
		        jButton2.setBounds(280, 168, 100, 30);//按钮2设置布局和大小
		        jButton2.addActionListener(new ActionListener(){//将按钮2插入监听
			        public void actionPerformed(ActionEvent evt){
				        jButton2ActionPerformed(evt);
			        }
		        });
			}
			
	pack();
	this.setSize(442, 265);
	setLocationRelativeTo(null);
    } catch (Exception e){
	e.printStackTrace();
    }
    }

    private void jButton1ActionPerformed(ActionEvent evt){
    	int guess = 0;
    		counter++;
    	try{
    		guess=Integer.parseInt(jTextField1.getText());
    	}catch(Exception e){
    		JOptionPane.showMessageDialog(null, "数字不合法,请输入1-100的整数");
    		jTextField1.setText("");
    		jTextField1.requestFocus();
    		return;
    	}
    	if(guess>number){
    		JOptionPane.showMessageDialog(null, "输入的大了");
    		jTextField1.setText("");
    		jTextField1.requestFocus();
    		return;
    	}
    	if(guess<number){
    		JOptionPane.showMessageDialog(null, "输入的小了");
    		jTextField1.setText("");
    		jTextField1.requestFocus();
    		return;
    	}
    	if(guess == number){
    		endTime=System.currentTimeMillis();
    		switch(counter){
    		case 1:JOptionPane.showMessageDialog(null, "牛逼");
    		break;
    		case 2:
    		case 3:
    		case 4:
    		case 5:
    		case 6:
    		case 7:JOptionPane.showMessageDialog(null, "你很smart");
    		break;
    		default:JOptionPane.showMessageDialog(null, "猜了挺久，你需要努力");
    		break;
    		}
    		JOptionPane.showMessageDialog(null, "您总共猜了"+counter+"次，共花了"+(endTime-startTime)/1000+"秒的时间答对正确答案");
    	}
    	jTextField1.setText("");
    	jTextField1.requestFocus();
    }
    //显示猜测结果并清空文本框
    private void jButton2ActionPerformed(ActionEvent evt){
    	Random random = new Random();
    	number = random.nextInt(100);
    	counter = 0;
    	jTextField1.setText("");
    	startTime = System.currentTimeMillis();
    }
    
    private void jTextField1KeyPressed(KeyEvent evt){
    	if (evt.getKeyCode()==KeyEvent.VK_ENTER){
    		jButton1.doClick();
    	}
    }
}}